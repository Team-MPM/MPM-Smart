@page "/AddDialog"

<MudDialog>
    <TitleContent>
        Device hinzufügen
    </TitleContent>
    <DialogContent>
        <MudContainer Style="height: 600px" Class="d-flex flex-row">
            <MudTabs Elevation="1" Rounded="true" PanelClass="pa-6"
                     ActiveTabClass="border-solid border-2 mud-border-primary">
                <MudTabPanel>
                    <ChildContent>
                        <MudText>Geräte automatisch finden</MudText>
                    </ChildContent>
                    <TabContent>Automatisch</TabContent>
                </MudTabPanel>
                <MudTabPanel>
                    <ChildContent>
                        <EditForm Model="@m_Model" OnValidSubmit="OnValidSubmit">
                            <DataAnnotationsValidator/>
                            <MudGrid>
                                <MudItem xs="12" sm="7">
                                    <MudCard>
                                        <MudCardContent>
                                            <MudTextField Label="First name" HelperText="Max. 8 characters"
                                                          @bind-Value="m_Model.Username" For="@(() => m_Model.Username)"/>
                                            <MudTextField Label="Email" Class="mt-3"
                                                          @bind-Value="m_Model.Email" For="@(() => m_Model.Email)"/>
                                            <MudTextField Label="Password" HelperText="Choose a strong password"
                                                          Class="mt-3"
                                                          @bind-Value="m_Model.Password" For="@(() => m_Model.Password)"
                                                          InputType="InputType.Password"/>
                                            <MudTextField Label="Password" HelperText="Repeat the password" Class="mt-3"
                                                          @bind-Value="m_Model.Password2" For="@(() => m_Model.Password2)"
                                                          InputType="InputType.Password"/>
                                        </MudCardContent>
                                        <MudCardActions>
                                            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled"
                                                       Color="Color.Primary" Class="ml-auto">Register
                                            </MudButton>
                                        </MudCardActions>
                                    </MudCard>
                                </MudItem>
                            </MudGrid>
                        </EditForm>
                    </ChildContent>
                    <TabContent>
                        <MudText>Manual</MudText>
                    </TabContent>
                </MudTabPanel>
            </MudTabs>
        </MudContainer>
    </DialogContent>
</MudDialog>

@code {
    readonly RegisterAccountForm m_Model = new();

    public class RegisterAccountForm
    {
        public string? Username { get; set; }
        public string? Email { get; set; }
        public string? Password { get; set; }
        public string? Password2 { get; set; }
    }

    private void OnValidSubmit(EditContext context)
    {
        StateHasChanged();
    }
}