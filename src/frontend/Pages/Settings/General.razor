@page "/Settings/General"
@using Frontend.Services
@layout MainLayout

@inject ApiAccessor accessor
<MudContainer MaxWidth="MaxWidth.Small" Class="mt-6">

    <MudText Typo="Typo.h5" Align="Align.Left" Class="mb-4">Allgemeine Einstellungen</MudText>

    <MudPaper Class="p-2 mb-4" Elevation="2">
        <MudStack Spacing="1" Row="true" AlignItems="AlignItems.Start" Justify="Justify.FlexStart">
            <MudTextField Label="Benutzername" Variant="Variant.Outlined" @bind-Value="systemname" FullWidth="true"/>
        </MudStack>
    </MudPaper>

    <MudPaper Class="p-2 mb-4" Elevation="2">
        <MudStack Spacing="1" Row="true" AlignItems="AlignItems.Start" Justify="Justify.FlexStart">
            <MudSelect T="string" Label="Zeitzone auswählen" Variant="Variant.Outlined" @bind-Value="selectedTimeZone">
                @foreach (var timeZone in TimeZones)
                {
                    <MudSelectItem T="string" Value="timeZone">@timeZone</MudSelectItem>
                }
            </MudSelect>
        </MudStack>
    </MudPaper>

    <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-2" OnClick="SaveSettings">Einstellungen speichern</MudButton>

</MudContainer>

@code {
    private string systemname = "Localhost";
    private string selectedTimeZone = "UTC"; 
    
    
    private List<string> TimeZones = new()
    {
        "UTC", "CET", "EET", "EST", "CST", "MST", "PST", "GMT", "IST", "JST",
        "AEST", "AEDT", "ACST", "AKST", "ART", "AST", "AWST", "BRT", "CAT",
        "CCT", "CDT", "CEST", "CLT", "CST6CDT", "EAT", "ECT", "EDT", "HKT",
        "HST", "IRKT", "KST", "MDT", "MSK", "NZST", "PKT", "PHT", "SAST",
        "SGT", "UTC12", "WAT", "WET"
    };
    
    private async Task SaveSettings()
    {
        await accessor.SetSystemName(systemname);
    }
}

