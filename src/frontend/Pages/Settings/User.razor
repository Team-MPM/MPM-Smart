@page "/Settings/User"
@using Frontend.Services
@using MudBlazor

@inject ApiAccessor accessor

<MudContainer MaxWidth="MaxWidth.Small" Class="mt-6">
    
    <MudText Typo="Typo.h5" Align="Align.Left" Class="mb-4">Benutzer Einstellungen</MudText>

    <MudPaper Class="p-2 mb-4" Elevation="2">
        <MudStack Spacing="1" Row="true" AlignItems="AlignItems.Start" Justify="Justify.FlexStart">
            <MudTextField Label="Benutzername" Variant="Variant.Outlined" @bind-Value="username" FullWidth="true"/>
        </MudStack>
    </MudPaper>

    <MudPaper Class="p-2 mb-4" Elevation="2">
        <MudStack Spacing="1" Row="true" AlignItems="AlignItems.Start" Justify="Justify.FlexStart">
            <MudTextField Label="Passwort" Variant="Variant.Outlined" InputType="InputType.Password" @bind-Value="password" FullWidth="true"/>
        </MudStack>
    </MudPaper>

    <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-2" OnClick="SaveSettings">Einstellungen speichern</MudButton>

</MudContainer>

@code {
    private string username = "detrax";
    private string password = "********";

    private async Task SaveSettings()
    {
        await accessor.SetUsername(username);
        await accessor.SetPassword(password, password);
    }
}
